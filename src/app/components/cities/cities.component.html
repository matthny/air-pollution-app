<div class="wrapper">
  <div class="menu-container">  
    <form [formGroup]="citiesPollutionForm" novalidate (ngSubmit)="onGoClick()">
      <mat-form-field class="country-item" >
        <mat-label>Country</mat-label>
        <mat-select formControlName="country">
          <mat-option *ngFor="let country of countries" [value]="country.code">
            {{country.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field class="parameter-item">
        <mat-label>Parameter</mat-label>
        <mat-select formControlName="parameter">
          <mat-option *ngFor="let parameter of PARAMETERS" [value]="parameter">
            {{parameter}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-button-toggle-group (change)="onDateToggleChange()" class="time-item" #dateGroup="matButtonToggleGroup" formControlName="dateType">
        <mat-button-toggle value="now" aria-label="Now">
          Now
        </mat-button-toggle>
        <mat-button-toggle value="dateRange" aria-label="Date picker">
          <mat-icon>date_range</mat-icon>
        </mat-button-toggle>
      </mat-button-toggle-group>

      <div class="date-pickers" *ngIf="showDatePicker == true">
        <mat-form-field class="picker-from">
          <input matInput [matDatepicker]="fromDatePicker" placeholder="Choose a date" formControlName="fromDate">
          <mat-datepicker-toggle matSuffix [for]="fromDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #fromDatePicker></mat-datepicker>
        </mat-form-field>

        <mat-form-field class="picker-to">
          <input matInput [matDatepicker]="toDatePicker" placeholder="Choose a date"  formControlName="toDate">
          <mat-datepicker-toggle matSuffix [for]="toDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #toDatePicker></mat-datepicker>
        </mat-form-field>
      </div>

      <button mat-stroked-button type="submit" class="go-button-item">Go!</button>
    </form>
  </div>

  <div class="grid-container">
    <table *ngIf="measurementGridDataSourceAngularMaterial.data.length > 0" mat-table [dataSource]="measurementGridDataSourceAngularMaterial" matSort (matSortChange)="onMatSortChange($event)" matSortDisableClear matSortStart="desc" class="mat-elevation-z8">
      <ng-container matColumnDef="{{cityColumn}}">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> City </th>
        <td mat-cell *matCellDef="let element"> {{element.city}} </td>
      </ng-container>
    
      <ng-container matColumnDef="{{bcColumn}}">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> bc </th>
        <td mat-cell *matCellDef="let element"> {{element.bc ? element.bc.getStringValue(2) : null}} </td>
      </ng-container>

      <ng-container matColumnDef="{{coColumn}}">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> co </th>
        <td mat-cell *matCellDef="let element"> {{element.co ? element.co.getStringValue(2) : null}} </td>
      </ng-container>

      <ng-container matColumnDef="{{no2Column}}">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> no2 </th>
        <td mat-cell *matCellDef="let element"> {{element.no2 ? element.no2.getStringValue(2) : null}} </td>
      </ng-container>

      <ng-container matColumnDef="{{o3Column}}">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> o3 </th>
        <td mat-cell *matCellDef="let element"> {{element.o3 ? element.o3.getStringValue(2) : null}} </td>
      </ng-container>

      <ng-container matColumnDef="{{pm10Column}}">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> pm10 </th>
        <td mat-cell *matCellDef="let element"> {{element.pm10 ? element.pm10.getStringValue(2) : null}} </td>
      </ng-container>

      <ng-container matColumnDef="{{pm25Column}}">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> pm25 </th>
        <td mat-cell *matCellDef="let element"> {{element.pm25 ? element.pm25.getStringValue(2) : null}} </td>
      </ng-container>

      <ng-container matColumnDef="{{so2Column}}">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> so2 </th>
        <td mat-cell *matCellDef="let element"> {{element.so2 ? element.so2.getStringValue(2) : null}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="measurementGridGridColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: measurementGridGridColumns;"></tr>
    </table>
  </div>

</div>